version: 1
frontend:
  phases:
    preBuild:
      commands:
        - nvm install 20
        - nvm use 20
        - cd frontend
        - npm ci
    build:
      commands:
        - cd frontend
        - npm run build
        - echo "=== Current directory ==="
        - pwd
        - echo "=== Creating index.html in current directory ==="
        - echo '<html><body><h1>ðŸš€ JunoKit Deployment Test</h1><p>Build time: '$(date)'</p><p>SUCCESS: Basic deployment is working!</p><a href="/test.html">Test HTML</a> | <a href="/test.json">Test JSON</a></body></html>' > index.html
        - echo "=== Creating test files ==="
        - echo '<h1>âœ… Test HTML Working!</h1><p>Static file deployment confirmed.</p>' > test.html
        - echo '{"status":"ok","message":"JSON working","timestamp":"'$(date -u +%Y-%m-%dT%H:%M:%SZ)'"}' > test.json
        - echo "=== Verifying files exist ==="
        - ls -la index.html test.html test.json
        - echo "=== Directory contents ==="
        - ls -la
  artifacts:
    baseDirectory: frontend
    files:
      - 'index.html'
      - 'test.html'
      - 'test.json'
  cache:
    paths:
      - frontend/node_modules/**/*